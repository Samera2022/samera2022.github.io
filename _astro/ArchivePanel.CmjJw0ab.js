import{p as T,o as tt,a as et,c as at,b as W,i as E}from"./translation.BTAF_BXP.js";import{N as _,S as b,T as rt,U as it,X as st,t as ot,d as t,Z as n,O as d,P as p,a0 as l,a1 as w,Q as j,Y as g}from"./render.7h2Bo7UW.js";import{e as F,i as K}from"./each.ExDfyQne.js";import{I as C}from"./zh_TW.CkfBuvkU.js";import{g as L}from"./url-utils.lYFt4qGC.js";function nt(y){const u=y.reduce((a,v)=>{const o=v.data.published.getFullYear();return a[o]||(a[o]=[]),a[o].push(v),a},{}),c=Object.keys(u).map(a=>({year:Number.parseInt(a,10),posts:u[Number.parseInt(a,10)]}));return c.sort((a,v)=>v.year-a.year),c.forEach(a=>{a.posts.sort((v,o)=>{const P=new Date(v.data.published);return new Date(o.data.published).getTime()-P.getTime()})}),c}var lt=_('<span class="text-50"> </span>'),dt=_(`<a class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"><!> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),vt=_(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>`),ut=_('<div class="card-base px-8 py-6"></div>');function xt(y,u){it(u,!1);let c=T(u,"tags",28,()=>[]),a=T(u,"categories",28,()=>[]),v=T(u,"sortedPosts",24,()=>[]);const o=new URLSearchParams(window.location.search);c(o.has("tag")?o.getAll("tag"):[]),a(o.has("category")?o.getAll("category"):[]);const P=o.get("uncategorized");let A=ot([]);function Q(r){const e=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0");return`${e}-${i}`}function R(r){return r.map(e=>`#${e}`).join(" ")}function N(r,e){if(!r||e.length===0)return"";for(const i of e)if(r.startsWith(i+"/"))return`/${r.substring(i.length+1)}/`;return""}tt(async()=>{let r=v();c().length>0&&(r=r.filter(e=>Array.isArray(e.data.tags)&&e.data.tags.some(i=>c().includes(i)))),a().length>0&&(r=r.filter(e=>{const i=e.data.category;return i?a().some(f=>i===f||i.startsWith(f+"/")):!1})),P&&(r=r.filter(e=>!e.data.category)),st(A,nt(r))}),et();var k=ut();F(k,5,()=>t(A),K,(r,e)=>{var i=vt(),f=d(i),S=d(f),X=d(S,!0);n(S);var U=p(S,4),Z=d(U);n(U),n(f);var $=p(f,2);F($,1,()=>(t(e),l(()=>t(e).posts)),K,(z,s)=>{var h=dt(),Y=d(h),B=d(Y),q=d(B,!0);n(B);var D=p(B,4),M=d(D);{var G=m=>{var x=lt(),I=d(x,!0);n(x),j(V=>g(I,V),[()=>(t(s),w(a()),l(()=>N(t(s).data.category,a())))]),b(m,x)};at(M,m=>{t(s),w(a()),l(()=>N(t(s).data.category,a()))&&m(G)})}var H=p(M);n(D);var O=p(D,2),J=d(O,!0);n(O),n(Y),n(h),j((m,x,I)=>{W(h,"href",m),W(h,"aria-label",(t(s),l(()=>t(s).data.title))),g(q,x),g(H,` ${t(s),l(()=>t(s).data.title)??""}`),g(J,I)},[()=>(w(L),t(s),l(()=>L(t(s).slug))),()=>(t(s),l(()=>Q(t(s).data.published))),()=>(t(s),l(()=>R(t(s).data.tags)))]),b(z,h)}),n(i),j(z=>{g(X,(t(e),l(()=>t(e).year))),g(Z,`${t(e),l(()=>t(e).posts.length)??""} ${z??""}`)},[()=>(w(E),t(e),w(C),l(()=>E(t(e).posts.length===1?C.postCount:C.postsCount)))]),b(r,i)}),n(k),b(y,k),rt()}export{xt as default};
